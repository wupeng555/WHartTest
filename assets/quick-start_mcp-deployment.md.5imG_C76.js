import{_ as a,c as i,o as t,ae as l}from"./chunks/framework.BBQ6_s69.js";const c=JSON.parse('{"title":"MCP 测试工具部署文档","description":"","frontmatter":{},"headers":[],"relativePath":"quick-start/mcp-deployment.md","filePath":"quick-start/mcp-deployment.md","lastUpdated":1765776989000}'),n={name:"quick-start/mcp-deployment.md"};function e(h,s,p,r,o,k){return t(),i("div",null,s[0]||(s[0]=[l(`<h1 id="mcp-测试工具部署文档" tabindex="-1">MCP 测试工具部署文档 <a class="header-anchor" href="#mcp-测试工具部署文档" aria-label="Permalink to &quot;MCP 测试工具部署文档&quot;">​</a></h1><h2 id="项目概述" tabindex="-1">项目概述 <a class="header-anchor" href="#项目概述" aria-label="Permalink to &quot;项目概述&quot;">​</a></h2><p>本项目包含两个 MCP (Model Context Protocol) 工具服务：</p><ul><li><strong>ms_mcp_api.py</strong> - MS测试用例工具，提供与MS测试平台的API交互功能</li><li><strong>WHartTest_tools.py</strong> - WHartTest 测试用例工具，提供本地测试用例管理功能</li></ul><h2 id="注意" tabindex="-1">注意！！！ <a class="header-anchor" href="#注意" aria-label="Permalink to &quot;注意！！！&quot;">​</a></h2><ul><li><strong>Docker 部署</strong>：API Key 会在容器启动时自动初始化，默认 Key 为 <code>wharttest-default-mcp-key-2025</code></li><li><strong>源码部署</strong>：需要在数据库迁移完成后，手动执行 <code>python manage.py init_admin</code> 初始化，默认 Key 同上</li></ul><h2 id="安装部署" tabindex="-1">安装部署 <a class="header-anchor" href="#安装部署" aria-label="Permalink to &quot;安装部署&quot;">​</a></h2><h3 id="_1-创建虚拟环境并安装依赖" tabindex="-1">1. 创建虚拟环境并安装依赖 <a class="header-anchor" href="#_1-创建虚拟环境并安装依赖" aria-label="Permalink to &quot;1. 创建虚拟环境并安装依赖&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHartTest_MCP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> venv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.11</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 激活虚拟环境</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux/macOS</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .venv/bin/activate</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .venv\\Scripts\\activate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirements.txt</span></span></code></pre></div><h3 id="_2-配置说明" tabindex="-1">2. 配置说明 <a class="header-anchor" href="#_2-配置说明" aria-label="Permalink to &quot;2. 配置说明&quot;">​</a></h3><h4 id="ms测试用例工具-ms-mcp-api-py" tabindex="-1">MS测试用例工具 (ms_mcp_api.py) <a class="header-anchor" href="#ms测试用例工具-ms-mcp-api-py" aria-label="Permalink to &quot;MS测试用例工具 (ms_mcp_api.py)&quot;">​</a></h4><ul><li><strong>服务端口</strong>: 8007</li><li><strong>API地址</strong>: <a href="http://msxxxxxxxxx.com" target="_blank" rel="noreferrer">http://msxxxxxxxxx.com</a></li><li><strong>认证信息</strong>: 需要在 <code>.env</code> 文件中配置 <code>MS_ACCESS_KEY</code> 和 <code>MS_SECRET_KEY</code></li></ul><h4 id="wharttest-测试用例工具-wharttest-tools-py" tabindex="-1">WHartTest 测试用例工具 (WHartTest_tools.py) <a class="header-anchor" href="#wharttest-测试用例工具-wharttest-tools-py" aria-label="Permalink to &quot;WHartTest 测试用例工具 (WHartTest_tools.py)&quot;">​</a></h4><ul><li><strong>服务端口</strong>: 8006</li><li><strong>API地址</strong>: 后端服务ip+端口</li><li><strong>API密钥</strong>: 已内置在代码中</li></ul><h3 id="_3-启动服务" tabindex="-1">3. 启动服务 <a class="header-anchor" href="#_3-启动服务" aria-label="Permalink to &quot;3. 启动服务&quot;">​</a></h3><h4 id="启动ms测试用例工具" tabindex="-1">启动MS测试用例工具 <a class="header-anchor" href="#启动ms测试用例工具" aria-label="Permalink to &quot;启动MS测试用例工具&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ms_mcp_api.py</span></span></code></pre></div><p>服务将在 <code>http://127.0.0.1:8007</code> 启动</p><h4 id="启动测试用例工具" tabindex="-1">启动测试用例工具 <a class="header-anchor" href="#启动测试用例工具" aria-label="Permalink to &quot;启动测试用例工具&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">uv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WHartTest_tools.py</span></span></code></pre></div><p>服务将在 <code>http://0.0.0.0:8006</code> 启动</p><h2 id="功能说明" tabindex="-1">功能说明 <a class="header-anchor" href="#功能说明" aria-label="Permalink to &quot;功能说明&quot;">​</a></h2><h3 id="ms测试用例工具功能" tabindex="-1">MS测试用例工具功能 <a class="header-anchor" href="#ms测试用例工具功能" aria-label="Permalink to &quot;MS测试用例工具功能&quot;">​</a></h3><ul><li>获取项目名称和ID</li><li>获取模块名称和ID</li><li>获取用例等级信息</li><li>生成测试用例步骤数据</li><li>保存功能测试用例</li></ul><h3 id="测试用例工具功能" tabindex="-1">测试用例工具功能 <a class="header-anchor" href="#测试用例工具功能" aria-label="Permalink to &quot;测试用例工具功能&quot;">​</a></h3><ul><li>获取项目列表</li><li>获取模块信息</li><li>获取用例等级</li><li>获取用例列表和详情</li><li>保存操作截图</li><li>保存功能测试用例</li></ul><h2 id="mcp-集成" tabindex="-1">MCP 集成 <a class="header-anchor" href="#mcp-集成" aria-label="Permalink to &quot;MCP 集成&quot;">​</a></h2><p>这些工具基于 FastMCP 框架构建，可以与支持 MCP 协议的【其他客户端】集成使用。</p><h3 id="连接配置" tabindex="-1">连接配置 <a class="header-anchor" href="#连接配置" aria-label="Permalink to &quot;连接配置&quot;">​</a></h3><p>在 MCP 客户端中配置连接：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ms-testcase-tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;path/to/ms_mcp_api.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;testauto-tools&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;path/to/WHartTest_tools.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><ol><li>确保目标API服务可访问</li><li>检查防火墙设置，确保端口8006和8007可用</li><li>如需修改配置，请直接编辑源码中的配置参数</li><li>建议在生产环境中使用环境变量管理敏感信息</li></ol><h2 id="故障排除" tabindex="-1">故障排除 <a class="header-anchor" href="#故障排除" aria-label="Permalink to &quot;故障排除&quot;">​</a></h2><ul><li>如果服务启动失败，检查端口是否被占用</li><li>如果API调用失败，检查网络连接和API地址</li><li>查看控制台输出获取详细错误信息</li></ul>`,35)]))}const u=a(n,[["render",e]]);export{c as __pageData,u as default};
